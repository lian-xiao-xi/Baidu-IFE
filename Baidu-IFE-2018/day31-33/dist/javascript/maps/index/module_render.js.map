{"version":3,"sources":["index/module_render.ts"],"names":[],"mappings":"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","file":"../../index/module_render.js","sourcesContent":["import {getEle, dataFormat, checkVal} from '../common/common'\r\nimport {resultData} from './module_data'\r\n\r\n\r\n/**\r\n * 获取checkbox所选择的数据\r\n */\r\nexport function getCheckVal(): checkVal {\r\n  let result: checkVal = {\r\n    region: [],\r\n    product: []\r\n  };\r\n  [].slice.call(getEle(document, 'input[data-check=\"item\"]')).filter((item: HTMLInputElement) => {\r\n    return item.checked === true\r\n  }).forEach((item: HTMLInputElement) => {\r\n    if (item.classList.contains('region-checkbox')) {\r\n      result.region.push(item.value)\r\n    } else if (item.classList.contains('product-checkbox')) {\r\n      result.product.push(item.value)\r\n    }\r\n  });\r\n  console.log(result)\r\n  return result;\r\n}\r\n\r\n/**\r\n * 渲染表格\r\n */\r\nexport function renderData() {\r\n  let formData: checkVal = getCheckVal();\r\n\r\n  let headerData: string[] = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];\r\n\r\n  getEle(document, '.table-wrapper')[0].innerHTML = ''\r\n  let table = document.createElement('table');\r\n  table.className = 'data-table';\r\n  getEle(document, '.table-wrapper')[0].appendChild(table)\r\n\r\n  const product = formData.product, region = formData.region;\r\n  const pLen = product.length, rLen = region.length;\r\n\r\n  if (pLen === 1 && rLen === 1) {\r\n    render(true)\r\n  } else if (pLen === 1 && rLen > 1) {\r\n    render(true)\r\n  } else if (pLen > 1 && rLen === 1) {\r\n    render(false)\r\n  } else if (pLen > 1 && rLen > 1) {\r\n    render(true)\r\n  }\r\n\r\n  function render(howShow: boolean) {\r\n    let bodyData: dataFormat[] = resultData(product, region)\r\n    let headArr: string[] = [];\r\n    let varyArr: string[] = howShow ? ['商品', '地区'] : ['地区', '商品'];\r\n    headArr = varyArr.concat(headerData);\r\n    let theadStr = `<thead><tr class=\"thead-tr\">`\r\n    headArr.forEach((item) => {\r\n      theadStr += `<th class=\"thead-td\">${item}</th>`\r\n    })\r\n    theadStr += '</tr></thead>'\r\n\r\n    let tbodyStr = '<tbody>';\r\n    bodyData.forEach((itemData, index) => {\r\n      tbodyStr += '<tr class=\"tbody-tr\">';\r\n      if (howShow) {\r\n        if (index % rLen === 0) {\r\n          tbodyStr += `<td class=\"tbody-td\" rowspan=\"${rLen}\">${itemData.product}</td>`\r\n        }\r\n        tbodyStr += `<td class=\"tbody-td\">${itemData.region}</td>`;\r\n      } else {\r\n        if (index % pLen === 0) {\r\n          tbodyStr += `<td class=\"tbody-td\" rowspan=\"${pLen}\">${itemData.region}</td>`\r\n        }\r\n        tbodyStr += `<td class=\"tbody-td\">${itemData.product}</td>`;\r\n      }\r\n      itemData.sale.forEach((saleItem => {\r\n        tbodyStr += `<td>${saleItem}</td>`\r\n      }))\r\n      tbodyStr += '</tr>'\r\n    })\r\n    tbodyStr += '</tbody>'\r\n    table.innerHTML = theadStr + tbodyStr;\r\n  }\r\n  \r\n}"]}