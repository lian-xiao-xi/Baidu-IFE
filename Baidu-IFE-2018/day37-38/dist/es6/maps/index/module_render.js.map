{"version":3,"sources":["index/module_render.ts"],"names":[],"mappings":"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","file":"../../index/module_render.js","sourcesContent":["import {getEle, dataFormat, checkVal} from '../common/common'\r\nimport {resultData} from './module_data'\r\n\r\n\r\n/**\r\n * 获取checkbox所选择的数据\r\n */\r\nexport function getCheckVal(): checkVal {\r\n  let result: checkVal = {\r\n    region: [],\r\n    product: []\r\n  };\r\n  Array.from((getEle(document, 'input[data-check=\"item\"]'))).filter((item: HTMLInputElement) => {\r\n    return item.checked === true\r\n  }).forEach((item: HTMLInputElement) => {\r\n    if (item.classList.contains('region-checkbox')) {\r\n      result.region.push(item.value)\r\n    } else if (item.classList.contains('product-checkbox')) {\r\n      result.product.push(item.value)\r\n    }\r\n  });\r\n  console.log(result)\r\n  return result;\r\n}\r\n\r\n/**\r\n * 渲染表格\r\n */\r\nexport function renderData() {\r\n  let formData: checkVal = getCheckVal();\r\n  let headerData: string[] = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];\r\n\r\n  getEle(document, '.table-wrapper')[0].innerHTML = ''\r\n  let table = document.createElement('table');\r\n  table.className = 'data-table';\r\n  getEle(document, '.table-wrapper')[0].appendChild(table)\r\n\r\n  const product = formData.product, region = formData.region;\r\n  const pLen = product.length, rLen = region.length;\r\n\r\n  if (pLen === 1 && rLen === 1) {\r\n    render(true)\r\n  } else if (pLen === 1 && rLen > 1) {\r\n    render(true)\r\n  } else if (pLen > 1 && rLen === 1) {\r\n    render(false)\r\n  } else if (pLen > 1 && rLen > 1) {\r\n    render(true)\r\n  }\r\n\r\n  // 参数 howShow 用于设置 地区 和 商品 两栏的前后顺序\r\n  function render(howShow: boolean) {\r\n    let bodyData: dataFormat[] = resultData(product, region)\r\n    let varyArr: string[] = howShow ? ['商品', '地区'] : ['地区', '商品'];\r\n    let theadStr = `<thead class=\"data-thead\"><tr class=\"thead-tr\">`\r\n    varyArr.forEach((item) => {\r\n      theadStr += `<th class=\"thead-td\" data-type=\"${item}\">${item}</th>`\r\n    })\r\n    headerData.forEach((item) => {\r\n      theadStr += `<th class=\"thead-td\" data-month=\"${item}\">${item}</th>`\r\n    })\r\n    theadStr += '</tr></thead>';\r\n\r\n    let tbodyStr = '<tbody class=\"data-tbody\">';\r\n    bodyData.forEach((itemData, index) => {\r\n      tbodyStr += '<tr class=\"tbody-tr\">';\r\n      if (howShow) {\r\n        if (index % rLen === 0) {\r\n          tbodyStr += `<td class=\"tbody-td\" rowspan=\"${rLen}\">${itemData.product}</td>`\r\n        } else {\r\n          tbodyStr += `<td class=\"tbody-td\" style=\"display:none;\">${itemData.product}</td>`\r\n        }\r\n        tbodyStr += `<td class=\"tbody-td\">${itemData.region}</td>`;\r\n      } else {\r\n        if (index % pLen === 0) {\r\n          tbodyStr += `<td class=\"tbody-td\" rowspan=\"${pLen}\">${itemData.region}</td>`\r\n        } else {\r\n          tbodyStr += `<td class=\"tbody-td\" style=\"display:none;\">${itemData.region}</td>`\r\n        }\r\n        tbodyStr += `<td class=\"tbody-td\">${itemData.product}</td>`;\r\n      }\r\n      itemData.sale.forEach((saleItem => {\r\n        tbodyStr += `<td><span data-id=\"edit\" class=\"show\">${saleItem}</span><img src=\"./assets/images/edit.png\" class=\"img\" data-id=\"edit\"><input type=\"text\" class=\"edit-input\" value=\"${saleItem}\"></td>`\r\n      }))\r\n      tbodyStr += '</tr>'\r\n    })\r\n    tbodyStr += '</tbody>'\r\n    table.innerHTML = theadStr + tbodyStr;\r\n  }\r\n  \r\n}\r\n\r\n"]}